/**
 * Datadipity.NML is an extensible object oriented JavaScript library for connecting and communicating with Datadipity.com APIs. This is designed to drasitically reduce development time when building connected products and software. Copyright 2014 Clickslide Limited. All rights reserved.
 *
 * This work is licensed under the Creative Commons Attribution-NonCommercial-NoDerivatives 4.0 International License. To view a copy of this license, visit http://creativecommons.org/licenses/by-nc-nd/4.0/ or send a letter to Creative Commons, 444 Castro Street, Suite 900, Mountain View, California, 94041, USA.
 *
 * @namespace Datadipity
 */function NML(){this.created=!1,this.BaseUrl=null,this.setBaseUrl=function(e,t,n){this.BaseUrl=t+"://"+n+"/"+e},this.getBaseUrl=function(){return this.BaseUrl},this.Session=null,this.setSession=function(e){this.Session=e},this.getSession=function(){return this.Session};var e=function(){this.created=!0}(this);this.Login=function(e,t,n){var r=null;n!=null?r=n:r=this.onLogin,$.post(this.BaseUrl+"/login/doLogin.json",{email:e,password:t}).done(r)},this.onLogin=function(e){this.Session=e.session.id},this.add=function(e,t,n){var r=null;n!=null?r=n:r=this.processPageData,$.get(this.BaseUrl+"/"+t+".xml?_method=post&_action="+e+"&PHPSESSID="+this.Session).done(r)},this.update=function(e,t,n){var r=null;n!=null?r=n:r=this.processPageData,$.get(this.BaseUrl+"/"+pagesType+".xml?_method=put&_action="+action+"&PHPSESSID="+this.Session).done(r)},this.remove=function(e,t,n){var r=null;n!=null?r=n:r=this.processPageData,$.get(this.BaseUrl+"/"+pagesType+"/"+t+".xml?_method=delete&PHPSESSID="+this.Session).done(r)},this.get=function(e,t,n,r,i,s){var o=null;e?o=e:o=this.processPageData;var u=this.BaseUrl;try{if(r!=null&&i==null)u=this.BaseUrl+"/"+r.toLowerCase();else{if(i!=null&&r==null)throw{name:"Configuration Error",level:"Cancel Request",message:"pageType cannot be null when pageId is not. NML.get()"};i!=null&&r!=null&&(u=this.BaseUrl+"/"+r.toLowerCase()+"/"+i.toLowerCase())}}catch(a){console.log("error"),console.log(a)}s!=null&&(u=this.BaseUrl+"/"+s.toLowerCase()),t==1?u+=".json?update&PHPSESSID="+this.Session:u+=".json?PHPSESSID="+this.Session;if(n.length>0){var f=n.length;for(var l=0;l<f;l++)u+="&postparam["+n[l].name+"]="+n[l].value}console.log(u),$.ajax({type:"GET",url:u,dataType:"text"}).done(o).fail(this.failedRequest)},this.failedRequest=function(e,t,n){console.log(n)},this.processPageData=function(e){}};